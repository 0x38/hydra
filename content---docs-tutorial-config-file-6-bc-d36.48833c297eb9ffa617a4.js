(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{72:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return s}));t(0);var r=t(88);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i={id:"config_file",title:"Configuration file",sidebar_label:"Configuration file"},c=[{value:"Strict mode",id:"strict-mode",children:[]}],l={rightToc:c},p="wrapper";function s(e){var n=e.components,t=o(e,["components"]);return Object(r.b)(p,a({},l,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,"It can get tedious to type all those command line arguments every time.\nFix it by creating a configuration file:"),Object(r.b)("p",null,"Configuration file: ",Object(r.b)("inlineCode",{parentName:"p"},"config.yaml")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-yaml"}),"db:\n  driver: mysql\n  user: omry\n  pass: secret\n")),Object(r.b)("p",null,"Specify the config file by passing a ",Object(r.b)("inlineCode",{parentName:"p"},"config_path")," parameter to the ",Object(r.b)("inlineCode",{parentName:"p"},"@hydra.main()")," decorator.\nThe location of the ",Object(r.b)("inlineCode",{parentName:"p"},"config_path")," is relative to your Python file."),Object(r.b)("p",null,"Python file: ",Object(r.b)("inlineCode",{parentName:"p"},"my_app.py")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-python"}),"@hydra.main(config_path='config.yaml')\ndef my_app(cfg):\n    print(cfg.pretty())\n")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"config.yaml")," is loaded automatically when you run your application"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-yaml"}),"$ python my_app.py\ndb:\n  driver: mysql\n  pass: secret\n  user: omry\n")),Object(r.b)("p",null,"You can override values in the loaded config from the command line:"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-yaml"}),"$ python my_app.py db.user=root db.pass=1234\ndb:\n  driver: mysql\n  user: root\n  pass: 1234\n")),Object(r.b)("h3",{id:"strict-mode"},"Strict mode"),Object(r.b)("p",null,"Strict mode is a modifier in Hydra's decorator that prevents the introduction of new configuration options through overrides. I.e., strict mode lets you override previously seen options but not adding new ones.\nThis is useful for catching mistakes in both the command line overrides and in the code early.\nEnabling it will change the behavior of the ",Object(r.b)("inlineCode",{parentName:"p"},"cfg")," object such that:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Accessing a key that is not in the config will result in a ",Object(r.b)("inlineCode",{parentName:"li"},"KeyError")," instead of returning ",Object(r.b)("inlineCode",{parentName:"li"},"None")),Object(r.b)("li",{parentName:"ul"},"Attempting to insert a new key will result in a ",Object(r.b)("inlineCode",{parentName:"li"},"KeyError")," instead of inserting the key")),Object(r.b)("p",null,"You can learn more about this OmegaConf functionality ",Object(r.b)("a",a({parentName:"p"},{href:"https://omegaconf.readthedocs.io/en/latest/usage.html#configuration-flags"}),"here")),Object(r.b)("p",null,"Strict mode is on by default when you specify a configuration file for the ",Object(r.b)("inlineCode",{parentName:"p"},"config_path")," argument in ",Object(r.b)("inlineCode",{parentName:"p"},"@hydra.main")," decorator. It can be turned on or off (regardless of how ",Object(r.b)("inlineCode",{parentName:"p"},"config_path")," option in used) via the ",Object(r.b)("inlineCode",{parentName:"p"},"strict")," argument in your ",Object(r.b)("inlineCode",{parentName:"p"},"@hydra.main()")," decorator:"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-python"}),"@hydra.main(config_path='config.yaml')\ndef my_app(cfg):\n    driver = cfg.db.driver # Okay\n    user = cfg.db.user # Okay\n    password = cfg.db.password # Not okay, there is no password field in db!\n                               # This will result in a KeyError\n")),Object(r.b)("p",null,"Strict mode will also catch command line override mistakes:"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-text"}),"$ python my_app.py db.port=3306\nTraceback (most recent call last):\n...\nKeyError: 'Accessing unknown key in a struct : db.port\n")),Object(r.b)("p",null,"With strict mode off, the above example will pass successfully:"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-python"}),"@hydra.main(config_path='config.yaml', strict=False)\ndef my_app(cfg):\n    cfg.db.port = 3306 # Okay\n")))}s.isMDXComponent=!0},88:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return b}));var r=t(0),a=t.n(r),o=a.a.createContext({}),i=function(e){var n=a.a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},c=function(e){var n=i(e.components);return a.a.createElement(o.Provider,{value:n},e.children)};var l="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},s=Object(r.forwardRef)((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(e,["components","mdxType","originalType","parentName"]),s=i(t),b=r,u=s[c+"."+b]||s[b]||p[b]||o;return t?a.a.createElement(u,Object.assign({},{ref:n},l,{components:t})):a.a.createElement(u,Object.assign({},{ref:n},l))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=s;var c={};for(var p in n)hasOwnProperty.call(n,p)&&(c[p]=n[p]);c.originalType=e,c[l]="string"==typeof e?e:r,i[1]=c;for(var b=2;b<o;b++)i[b]=t[b];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}s.displayName="MDXCreateElement"}}]);