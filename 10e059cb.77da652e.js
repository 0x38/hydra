(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{236:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return m}));var a=t(0),r=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=r.a.createContext({}),b=function(e){var n=r.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=b(e.components);return r.a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},u=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(t),u=a,m=p["".concat(l,".").concat(u)]||p[u]||d[u]||i;return t?r.a.createElement(m,o(o({ref:n},s),{},{components:t})):r.a.createElement(m,o({ref:n},s))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=u;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var s=2;s<i;s++)l[s]=t[s];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},59:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return o})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return b}));var a=t(2),r=t(7),i=(t(0),t(236)),l={id:"basic",hide_title:!0,sidebar_label:"Basic Override syntax"},o={unversionedId:"advanced/override_grammar/basic",id:"advanced/override_grammar/basic",isDocsHomePage:!1,title:"basic",description:"Basic Override syntax",source:"@site/docs/advanced/override_grammar/basic.md",slug:"/advanced/override_grammar/basic",permalink:"/docs/next/advanced/override_grammar/basic",editUrl:"https://github.com/facebookresearch/hydra/edit/master/website/docs/advanced/override_grammar/basic.md",version:"current",lastUpdatedBy:"Omry Yadan",lastUpdatedAt:1598233629,sidebar_label:"Basic Override syntax",sidebar:"docs",previous:{title:"Hydra's command line flags",permalink:"/docs/next/advanced/hydra-command-line-flags"},next:{title:"extended",permalink:"/docs/next/advanced/override_grammar/extended"}},c=[{value:"Basic Override syntax",id:"basic-override-syntax",children:[]},{value:"Basic examples",id:"basic-examples",children:[{value:"Modifying the Config Object",id:"modifying-the-config-object",children:[]},{value:"Modifying the Defaults List",id:"modifying-the-defaults-list",children:[]}]},{value:"Grammar",id:"grammar",children:[]},{value:"Elements",id:"elements",children:[{value:"Key",id:"key",children:[]},{value:"Quoted values",id:"quoted-values",children:[]},{value:"Whitespaces in unquoted values",id:"whitespaces-in-unquoted-values",children:[]},{value:"Primitives",id:"primitives",children:[]},{value:"Lists",id:"lists",children:[]},{value:"Dictionaries",id:"dictionaries",children:[]},{value:"Sweeper syntax",id:"sweeper-syntax",children:[]},{value:"Functions",id:"functions",children:[]}]},{value:"Working with your shell",id:"working-with-your-shell",children:[{value:"Bash",id:"bash",children:[]},{value:"Other shells",id:"other-shells",children:[]}]}],s={rightToc:c};function b(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"basic-override-syntax"},"Basic Override syntax"),Object(i.b)("p",null,"You can manipulate your configuration with overrides (via the command line or the Compose API). This includes:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Modifying the the ",Object(i.b)("inlineCode",{parentName:"li"},"Defaults List")),Object(i.b)("li",{parentName:"ul"},"Modifying the config object")),Object(i.b)("p",null,"Overrides matching a config group are modifying the ",Object(i.b)("inlineCode",{parentName:"p"},"Defaults List"),";\nThe rest are manipulating the config object."),Object(i.b)("h2",{id:"basic-examples"},"Basic examples"),Object(i.b)("h3",{id:"modifying-the-config-object"},"Modifying the Config Object"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Overriding a config value : ",Object(i.b)("inlineCode",{parentName:"li"},"foo.bar=value")),Object(i.b)("li",{parentName:"ul"},"Appending a config value : ",Object(i.b)("inlineCode",{parentName:"li"},"+foo.bar=value")),Object(i.b)("li",{parentName:"ul"},"Removing a config value : ",Object(i.b)("inlineCode",{parentName:"li"},"~foo.bar"),", ",Object(i.b)("inlineCode",{parentName:"li"},"~foo.bar=value"))),Object(i.b)("h3",{id:"modifying-the-defaults-list"},"Modifying the Defaults List"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Overriding selected Option: ",Object(i.b)("inlineCode",{parentName:"li"},"db=mysql")),Object(i.b)("li",{parentName:"ul"},"Changing a package: ",Object(i.b)("inlineCode",{parentName:"li"},"db@src_pkg:dst_pkg")),Object(i.b)("li",{parentName:"ul"},"Overriding selected Option and changing the package: ",Object(i.b)("inlineCode",{parentName:"li"},"db@src_pkg:dst_pkg=mysql")),Object(i.b)("li",{parentName:"ul"},"Appending to defaults: ",Object(i.b)("inlineCode",{parentName:"li"},"+db=mysql")),Object(i.b)("li",{parentName:"ul"},"Deleting from defaults: ",Object(i.b)("inlineCode",{parentName:"li"},"~db"),", ",Object(i.b)("inlineCode",{parentName:"li"},"~db=mysql"))),Object(i.b)("h2",{id:"grammar"},"Grammar"),Object(i.b)("p",null,"Hydra supports a rich ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Domain-specific_language"}),"DSL")," in the command line.\nBelow are the parser rules from grammar.\nYou can see the full grammar on GitHub\n(",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebookresearch/hydra/tree/master/hydra/grammar/OverrideLexer.g4"}),"lexer")," and\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebookresearch/hydra/tree/master/hydra/grammar/OverrideParser.g4"}),"parser"),")"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-antlr4",metastring:'title="OverrideParser.g4"',title:'"OverrideParser.g4"'}),"override: (\n      key EQUAL value?                           // key=value, key= (for empty value)\n    | TILDE key (EQUAL value?)?                  // ~key | ~key=value\n    | PLUS key EQUAL value?                      // +key= | +key=value\n) EOF;\n\nkey :\n    packageOrGroup                               // key\n    | packageOrGroup AT package (COLON package)? // group@pkg | group@pkg1:pkg2\n    | packageOrGroup ATCOLON package             // group@:pkg2\n;\n\npackageOrGroup: package | ID (SLASH ID)+;        // db, hydra/launcher\npackage: (ID | DOT_PATH);                        // db, hydra.launcher\n\nvalue: element | simpleChoiceSweep;\n\nelement:\n      primitive\n    | listValue\n    | dictValue\n    | function\n;\n\nargName: ID EQUAL;\nfunction: ID POPEN (argName? element (COMMA argName? element )* )? PCLOSE;\n\nsimpleChoiceSweep:\n      element (COMMA element)+                   // value1,value2,value3\n;\n\nprimitive:\n      QUOTED_VALUE                               // 'hello world', \"hello world\"\n    | (   ID                                     // foo_10\n        | NULL                                   // null, NULL\n        | INT                                    // 0, 10, -20, 1_000_000\n        | FLOAT                                  // 3.14, -20.0, 1e-1, -10e3\n        | BOOL                                   // true, TrUe, false, False\n        | DOT_PATH                               // foo.bar\n        | INTERPOLATION                          // ${foo.bar}, ${env:USER,me}\n        | UNQUOTED_CHAR                          // /, -, \\, +, ., $, *\n        | COLON                                  // :\n        | WS                                     // whitespaces\n    )+;\n\nlistValue: BRACKET_OPEN                          // [], [1,2,3], [a,b,[1,2]]\n    (element(COMMA element)*)?\nBRACKET_CLOSE;\n\ndictValue: BRACE_OPEN\n    (ID COLON element (COMMA ID COLON element)*)?  // {}, {a:10,b:20}\nBRACE_CLOSE;\n")),Object(i.b)("h2",{id:"elements"},"Elements"),Object(i.b)("h3",{id:"key"},"Key"),Object(i.b)("p",null,"Key is the component before the =. A few examples:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),"foo.bar           # A config key\nhydra/launcher    # A config group\ngroup@pkg         # A config group assigned to the package pkg\ngroup@pkg1:pkg2   # A config group changing the package from pkg1 to pkg2\n")),Object(i.b)("h3",{id:"quoted-values"},"Quoted values"),Object(i.b)("p",null,"Hydra supports both double quotes and single quoted values.\nQuoted strings can accept any value between the quotes.\nTo include a single quote in a single quoted string escape it : ",Object(i.b)("inlineCode",{parentName:"p"},"\\'"),". Same for double quote in a double quoted string."),Object(i.b)("div",{className:"row"},Object(i.b)("div",{className:"col col--6"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python",metastring:'title="Double quotes"',title:'"Double','quotes"':!0}),'"hello there"\n"escaped \\"double quote\\""\n"1,2,3"\n"{a:10} ${xyz}"\n"\'single quoted string\'"\n'))),Object(i.b)("div",{className:"col  col--6"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python",metastring:'title="Single quotes"',title:'"Single','quotes"':!0}),"'hello there'\n'escaped \\'single quote\\''\n'1,2,3'\n'{a:10} ${xyz}'\n'\"double quoted string\"'\n")))),Object(i.b)("h3",{id:"whitespaces-in-unquoted-values"},"Whitespaces in unquoted values"),Object(i.b)("p",null,"Unquoted Override values can contain non leading or trailing whitespaces.\nFor example, ",Object(i.b)("inlineCode",{parentName:"p"},"msg=hello world")," is a legal override (key is ",Object(i.b)("inlineCode",{parentName:"p"},"msg")," and value is the string ",Object(i.b)("inlineCode",{parentName:"p"},"hello world"),").\nNormally, your shell will interpret values with whitespaces as being multiple parameters (",Object(i.b)("inlineCode",{parentName:"p"},"key=a b")," would be interpreted as ",Object(i.b)("inlineCode",{parentName:"p"},"key=a")," and ",Object(i.b)("inlineCode",{parentName:"p"},"b"),").\nTo prevent this you can quote them with a single quote. For example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"$ python my_app.py 'msg=hello world'\n")),Object(i.b)("p",null,"Note that trailing and leading whitespace are ignored, the above is equivalent to:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"$ python my_app.py 'msg=    hello world    '\n")),Object(i.b)("h3",{id:"primitives"},"Primitives"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"id")," : oompa10, loompa_12"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"null"),": null"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"int"),": 10, -20, 0, 1_000_000."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"float"),": 3.14, -10e6, inf, -inf, nan."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"bool"),": true, false"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"dot_path"),": foo.bar"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"interpolation"),": ${foo.bar}, ${env:USER,me}")),Object(i.b)("p",null,"Constants (null, true, false, inf, nan) are case insensitive."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"IMPORTANT")," Always single-quote interpolations in the shell."),Object(i.b)("h3",{id:"lists"},"Lists"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"foo=[1,2,3]\nnested=[a,[b,[c]]]\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"IMPORTANT")," Always single-quote overrides that contains lists in the shell."),Object(i.b)("h3",{id:"dictionaries"},"Dictionaries"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"foo={a:10,b:20}\nnested={a:10,b:{c:30,d:40}}\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"IMPORTANT")," Always single-quote overrides that contains dicts in the shell."),Object(i.b)("h3",{id:"sweeper-syntax"},"Sweeper syntax"),Object(i.b)("p",null,"A choice sweep is comma separated list with two or more elements:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),'key=a,b                       # Simple sweep: ChoiceSweep(a, b)\nkey="a,b","c,d"               # Elements can be quoted strings, ChoiceSweep("a,b", "c,d")\nkey=[a,b],[c,d]               # Elements can be real lists, ChoiceSweep([a,b], [c,d])\nkey={a:10, b:20},{c:30,d:40}  # And dictionaries: ChoiceSweep({a:10, b:20}, {c:30,d:40})\n')),Object(i.b)("p",null,"More sweeping options are described in the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"extended"}),"Extended Grammar page"),"."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"IMPORTANT")," You may need to quote your choice sweep in the shell"),Object(i.b)("h3",{id:"functions"},"Functions"),Object(i.b)("p",null,"Hydra supports several functions in the command line.\nSee the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"extended"}),"Extended Grammar page")," for more information."),Object(i.b)("h2",{id:"working-with-your-shell"},"Working with your shell"),Object(i.b)("p",null,"All shells interprets command line inputs and may change what is passed to the process.\nA good way to determine what the shell is doing to your command is to ",Object(i.b)("inlineCode",{parentName:"p"},"echo")," it."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),"# bash output\n$ echo foo_{a:10,b:20} ${HOME} [b,c]*\nfoo_a:10 foo_b:20 /home/omry build_helpers\n$ echo 'foo_{a:10,b:20}' '${HOME}' '[b,c]*'\nfoo_{a:10,b:20} ${HOME} [b,c]*\n")),Object(i.b)("p",null,"If in doubt, quote a command line element with a ",Object(i.b)("strong",{parentName:"p"},"single quote")," (",Object(i.b)("inlineCode",{parentName:"p"},"'"),")."),Object(i.b)("p",null,"If you want to pass quotes to Hydra in a shell quoted string, it's best to pass double quotes."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),'$ echo \'"hello world"\'\n"hello world"\n')),Object(i.b)("p",null,"You can use some shell specific commands to change their behavior, but the cost will be that their behavior will change."),Object(i.b)("h3",{id:"bash"},"Bash"),Object(i.b)("p",null,"You can disable braces expansion, filename generation (globing) and hist expansion. Please note that this will change\nyour shell behavior for the current session."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell",metastring:"script",script:!0}),"$ set +o braceexpand -o noglob +o histexpand\n$ echo key1={a:10,b:20} key2=${HOME} key=[b]*\nkey1={a:10,b:20} key2=/home/omry key=[b]*\n# does not help with () though:\n$  echo key=choice(a,b,c)\nbash: syntax error near unexpected token '('\n$ echo 'key=choice(a,b,c)'\nkey=choice(a,b,c)\n")),Object(i.b)("h3",{id:"other-shells"},"Other shells"),Object(i.b)("p",null,"Send a PR to add information about your favorite shell here."))}b.isMDXComponent=!0}}]);